---
title: introduction to hypothesis testing
author: ''
date: '2020-06-06'
slug: hypothesis-testing
categories: [statistics]
tags: []
description: ''
---


<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

There's two main branches of statistics. One, where we collect and summarize the data we have.  Other where we infer stuff about a population based on some sample data we collect. Hypothesis testing is one way to make that inference and so it is called inferential statistics.  It can be confusing because there are endless terminilogies and rules to keep in mind but we can tackle it by breaking it down into smaller parts. Let's get started! 


<img src="/post/hypothesis-testing_files/sampling.png" alt="final image" width="800" class="center"/>


It starts with a hypothesis.

## what is hypothesis?

A hypothesis is simply just a question about something in the world around you that can be tested, either by experiment or observation. For example, you may be interested in knowing

* Does this medicine work better than the other? 
* Are women better at multitasking than men? 
* Will putting on a hat make me more productive?
* Does coffee stunt your growth?

Let's say you're interested in finding out if coffee stunts your growth. Instead of collecting real data, we just simulate data, assuming a real effect of Cohen’s $\ d = 7/15$


```{r}
set.seed(666)
 
x <- rep(0:1, each = 50)
y1 <- rnorm(50, mean = 175, sd = 15)
y2 <- rnorm(50, mean = 170, sd = 15)	 	
dat <- data.frame(y = c(y1, y2), x = x)
	
boxplot(y ~ x, dat, col = c('red', 'grey'),
        xlab = 'coffee drinking status', ylab = 'height')

```

It seems like the the sample mean height of people that drink coffee is lower than those who don't. Does that conclude our study? Should we call it a day?


## why use hypothesis tests?

Let’s take a step back for a moment and restate why we should use a hypothesis test rather than just use the sample means to decide. Samples are a subset of the entire population. Sample statistics, such as the mean, are unlikely to equal the actual population values. The difference between the sample value and the population value is called sample error. If sample error causes the observed difference, the next time someone performs the same experiment the results might be different. Hypothesis testing incorporates estimates of the sampling error to help you make the correct decision.


## hypothesis testing

In general terms the hypothesis can be: 


The __null hypothesis__, denoted by $H_0$, is a claim about a population characteristic that we initially assumed to be true. 

The __alternative hypothesis__, denoted by $H_1$, is the competing claim (we often set up hypotheses in hopes of showing that $H_1$ is true).



In carrying out a hypothesis test of $H_0$ versus $H_1$, the hypothesis $H_0$ is rejected in favor of $H_1$ only if sample evidence strongly suggests that $H_0$ is false. If the sample does not provide such evidence, then $H_0$ is not rejected.


Therefore the two possible __outcomes__ of a hypothesis test are _reject $H_0$_ or _fail to reject $H_0$_ (in some cases we say “fail to reject $H_0$ in favor of $H_1$”).

 :exclamation: :exclamation: failing to reject H0 does not mean that we accept H0. :exclamation: :exclamation: 
 
 
:pencil: Many people have found an analogy between hypothesis testig and court room to be useful where 

* A hypothesis test is like holding a trial (going to court)
* $H_0$ is assumed true (innocent) until ”proven” otherwise (guilty)
* We have evidence to help us come to a decision (verdict)
* Possible outcomes: Reject $H_0$ (guilty) or fail to reject $H_0$ (not guilty)
        


## test procedure

Once hypotheses have been formulated, we need a method for using sample data to determine whether $H_0$ should be rejected or not. The method that we use is called a test procedure. Unfortunately, just as a jury may reach the wrong verdict in a trial, there is some chance that the use of a test procedure based on sample data may lead us to the wrong conclusion about a population characteristic.

## types of error

Type 1 error = $P(reject H_0 / H_0 is true)$


Type 2 error = $P(fail to reject H_0 / H_1 is true)$


In keeping with the jury example, 

<img src="/post/hypothesis-testing_files/errors.png" alt="final image" width="800" class="center"/>



## power

The power of a hypothesis test is the probability of rejecting the null hypothesis given that the null hypothesis is false. When H0 is false, the power of the test is given by $1 − \beta$

_power = probability of rejecting a null hypothesis_
        = 1- _probability of not rejecting null hypothesis_
        = $1 − \beta$_
        

## what is a hypothesis test?

Now that we know the possible errors that we can make and how we should control them, we need to figure out exactly what it is that we mean by “evidence against $H_0$”.

Evidence against the null hypothesis comes in the form of a __test statistic__, TS. A test statistic is a summary statistic that is a function of the sample data on which the conclusion to reject or fail to reject H0 is based. 

Another important part of any hypothesis test is the __decision rule__. The decision rule is a procedure that tells us when to reject or not to reject H0 and is based on the test statistic.

The range of values over which we do not reject H0 is called the __acceptance region__. The range of values over which we reject H0 is called the __rejection region__. The number that divides the acceptance and rejection regions is called the __critical value__.


<img src="/post/hypothesis-testing_files/one_sided.png" alt="final image" width="800" class="center"/>


<img src="/post/hypothesis-testing_files/two_sided.png" alt="final image" width="800" class="center"/>

### back to example:



```{r}
summary(lm(y ~ x, dat))
```



Template for conducting hypothesis testing

* Explicitly define the population parameter of interest.
* State the null and alternative hypotheses.
* State the significance level of the test.
* State any necessary assumptions.
* State the form of the test statistic and its null distribution
* State the decision rule and/or compute the p-value and make a decision.
* State your conclusions in the context of the problem.







